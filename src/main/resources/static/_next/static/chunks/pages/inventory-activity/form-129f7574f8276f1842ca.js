(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{27483:function(e,t,r){"use strict";r.d(t,{e:function(){return c}});var n=r(92809),a=r(67294);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useState)(e),r=t[0],n=t[1];return[r,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(i(i({},r),e))}]}},49580:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n=r(92809),a=r(30266),s=r(66311),i=r(809),c=r.n(i),l=r(41664),o=r(67294),u=r(27483),d=r(40889),f=r(27966),p=r(86455),v=r.n(p),m=r(11163),h=r(70432),b=r(12815),x=(r(30381),r(75676)),y=r(85893);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w={date:new Date,activityref:"",invstatus:"out",itemref:"",label:"",qty:"1",itemcode:"",price:"0.00",amount:"0.00",vouchercode:"",customername:"",remark:""};function O(){(0,m.useRouter)();var e=(0,o.useState)(!1),t=e[0],r=e[1],n=(0,u.e)(w),i=(0,s.Z)(n,2),p=i[0],g=i[1],O=(0,o.useState)([]),N=O[0],k=O[1],P=(0,o.useState)("0"),C=P[0],S=P[1],Z=(0,o.useState)({name:"en-US",label:"English (US)"}),I=Z[0],D=(Z[1],(0,o.useState)(1)),E=D[0],B=D[1],_=(0,o.useState)({label:p.label,value:p.itemref}),L=_[0],q=_[1],A=function(){var e=(0,a.Z)(c().mark((function e(t){var r,n,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.get("/inventory-activities/remainings/".concat(t));case 2:r=e.sent,n=(0,s.Z)(r,2),a=n[0],(i=n[1])&&(0,x.x)(i),S(a.data.data+"");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){var e=parseFloat(p.price.replaceAll(",","")||"0.00")*parseInt(p.qty||"0");g({amount:(0,d.l)(e)})}),[p.price,p.qty]),(0,o.useEffect)((function(){f.Z.get("/inventories/inventory-combo").then((function(e){var t=(0,s.Z)(e,2),r=t[0];if(t[1])v().fire({icon:"error",title:"Oops...",text:err.message,footer:'<a href="">Why do I have this issue?</a>'});else{k(r.data.data.map((function(e){return j(j({},e),{},{value:e.itemref})})));var n=localStorage.getItem("activityref");n&&(v().fire({showConfirmButton:!1,title:"Please Wait !",html:'<div style="width: 5rem; height: 5rem;" class="spinner-border m-3 text-info" role="status">\n                        <span class="visually-hidden">Loading...</span>\n                      </div>',allowOutsideClick:!1,onBeforeOpen:function(){v().showLoading()}}),f.Z.get("/inventory-activities/".concat(n)).then((function(e){var t=(0,s.Z)(e,2),r=t[0],n=t[1];v().close(),n?v().fire({icon:"error",title:"Oops...",text:n.message,footer:'<a href="">Why do I have this issue?</a>'}):(A(r.data.data.itemref),B(r.data.data.voidstatus),g(j(j({},r.data.data),{},{price:(0,d.l)(r.data.data.price),amount:(0,d.l)(r.data.data.amount)})),q({label:r.data.data.label,value:r.data.data.itemref}))})))}}))}),[]);var R=function(){var e=(0,a.Z)(c().mark((function e(){var n,a,i,l,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return r(!0),v().fire({showConfirmButton:!1,title:"Please Wait !",html:'<div style="width: 5rem; height: 5rem;" class="spinner-border m-3 text-info" role="status">\n          <span class="visually-hidden">Loading...</span>\n        </div>',allowOutsideClick:!1,onBeforeOpen:function(){v().showLoading()}}),(n=j(j({},p),{},{price:p.price.replaceAll(",",""),amount:p.amount.replaceAll(",",""),date:p.date.toISOString()})).hasOwnProperty("id")&&delete n.id,e.next=8,f.Z.post("/inventory-activities",n);case 8:a=e.sent,i=(0,s.Z)(a,2),l=i[0],(o=i[1])&&(v().close(),v().fire({icon:"error",title:"Oops...",text:o.message,footer:'<a href="">Why do I have this issue?</a>'})),l&&(v().close(),console.log(l),v().fire({position:"center",icon:"success",title:l.data.message,showConfirmButton:!1,timer:5e3}),g(j(j({},l.data.data),{},{price:(0,d.l)(l.data.data.price),amount:(0,d.l)(l.data.data.amount)})),B(l.data.data.voidstatus),localStorage.setItem("activityref",l.data.data.activityref),A(l.data.data.itemref)),r(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,a.Z)(c().mark((function e(){var n,a,i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return r(!0),n=1==E?0:1,v().fire({showConfirmButton:!1,title:"Please Wait !",html:'<div style="width: 5rem; height: 5rem;" class="spinner-border m-3 text-info" role="status">\n          <span class="visually-hidden">Loading...</span>\n        </div>',allowOutsideClick:!1,onBeforeOpen:function(){v().showLoading()}}),e.next=7,f.Z.put("/inventory-activities/void/".concat(p.activityref),{voidstatus:n});case 7:a=e.sent,i=(0,s.Z)(a,2),i[0],l=i[1],v().close(),r(!1),l?(0,x.x)(l):(B(n),A(p.itemref));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.jsxs)("div",{children:[(0,y.jsx)("nav",{style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",children:(0,y.jsxs)("ol",{className:"breadcrumb",children:[(0,y.jsx)("li",{class:"breadcrumb-item",children:(0,y.jsx)(l.default,{href:"/inventory-activity",children:(0,y.jsx)("a",{children:"Inventory In/Out"})})}),(0,y.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:p.activityref?p.activityref:"New"})]})}),(0,y.jsx)("div",{className:"card",children:(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsxs)("div",{className:"row mb-4",children:[(0,y.jsxs)("div",{className:"col-xl-4",children:[(0,y.jsx)("button",{className:"btn btn-primary mx-2",style:{marginLeft:"0px!important"},onClick:function(){B(1),localStorage.setItem("activityref",""),g(w),q({label:"",value:""}),S("0")},children:"New"}),p.activityref?"":(0,y.jsx)("button",{disabled:!p.itemref||!p.date,className:"btn btn-success mx-2",onClick:R,children:"Save"}),p.activityref?(0,y.jsx)("button",{disabled:!p.activityref,onClick:z,className:"btn btn-danger mx-2",children:1==E?"Void":"Unvoid"}):""]}),(0,y.jsx)("div",{className:"col-xl-7"}),(0,y.jsx)("div",{className:"col-xl-1",style:{display:"flex",justifyContent:"end"},children:0==E?(0,y.jsx)("svg",{style:{width:"2rem"},"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times-circle",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"svg-inline--fa fa-times-circle fa-w-16 fa-3x",children:(0,y.jsx)("path",{style:{color:"red"},fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z",class:""})}):""})]}),(0,y.jsxs)("div",{className:"row mb-3",style:{alignItems:"flex-end"},children:[(0,y.jsxs)("div",{className:"col-xl-3",children:[(0,y.jsx)("label",{className:"form-label",children:"Ref."}),(0,y.jsx)("input",{type:"text",readOnly:!0,className:"form-control",value:p.activityref,onChange:function(e){return g({activityref:e.target.value})}})]}),(0,y.jsx)("div",{className:"col-xl-3",children:(0,y.jsxs)("div",{class:"btn-group",role:"group","aria-label":"Basic radio toggle button group",onChange:function(e){return g({invstatus:e.target.value})},children:[(0,y.jsx)("input",{type:"radio",class:"btn-check",name:"invstatus",id:"btnradio1",autocomplete:"off",value:"in",checked:"in"==p.invstatus}),(0,y.jsx)("label",{class:"btn btn-outline-primary",for:"btnradio1",children:"In"}),(0,y.jsx)("input",{type:"radio",class:"btn-check",name:"invstatus",id:"btnradio2",autocomplete:"off",value:"out",checked:"out"==p.invstatus}),(0,y.jsx)("label",{class:"btn btn-outline-primary",for:"btnradio2",children:"Out"}),(0,y.jsx)("input",{type:"radio",class:"btn-check",name:"invstatus",id:"btnradio3",autocomplete:"off",value:"reject",checked:"reject"==p.invstatus}),(0,y.jsx)("label",{class:"btn btn-outline-primary",for:"btnradio3",children:"Reject"})]})})]}),(0,y.jsx)("div",{className:"row mb-3",children:(0,y.jsxs)("div",{className:"col-xl-3",children:[(0,y.jsx)("label",{className:"form-label",children:"Date"}),(0,y.jsx)(b.Mt,{id:"datePicker-1",value:p.date,onChange:function(e){return g({date:e})},formatStyle:"medium",locale:I.name})]})}),(0,y.jsxs)("div",{className:"row mb-3",children:[(0,y.jsxs)("div",{className:"col-xl-3",children:[(0,y.jsx)("label",{className:"form-label",children:"Inventory"}),(0,y.jsx)(h.ZP,{isDisabled:p.activityref,value:L,options:N,onChange:function(e){q(j({},e)),S(e.remaining+""),g({label:e.label,itemref:e.itemref,itemcode:e.itemcode,price:(0,d.l)(e.price)})}})]}),(0,y.jsxs)("div",{className:"col-xl-2",children:[(0,y.jsx)("label",{className:"form-label",children:"Remaining"}),(0,y.jsx)("input",{type:"text",className:"form-control",readOnly:!0,value:C})]})]}),(0,y.jsxs)("div",{className:"row mb-3",style:{alignItems:"flex-end"},children:[(0,y.jsxs)("div",{className:"col-xl-3",children:[(0,y.jsx)("label",{className:"form-label",children:"Inventory Code"}),(0,y.jsx)("input",{readOnly:!0,type:"text",className:"form-control",value:p.itemcode,onChange:function(e){return g({itemcode:e.target.value})}})]}),(0,y.jsxs)("div",{className:"col-xl-2",children:[(0,y.jsx)("label",{className:"form-label",children:"Price"}),(0,y.jsx)("input",{value:p.price,type:"text",readOnly:"in"!=p.invstatus,className:"form-control price-control",onChange:function(e){return g({price:e.target.value.replace(/[a-zA-Z]/g,"")})},onBlur:function(e){return g({price:(0,d.l)(e.target.value)})}})]}),(0,y.jsxs)("div",{className:"col-xl-2",children:[(0,y.jsx)("label",{className:"form-label",children:"Qty"}),(0,y.jsxs)("div",{class:"input-group",style:{borderRadius:"10px"},children:[(0,y.jsx)("span",{class:"input-group-text",id:"basic-addon1",style:{borderRadius:"10px 0 0 10px",background:"#fff"},onClick:function(){var e=parseInt(p.qty||"0");e>0&&g({qty:e-1})},children:(0,y.jsx)("svg",{style:{width:"1rem"},"aria-hidden":"true",focusable:"false","data-prefix":"fal","data-icon":"minus",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",class:"svg-inline--fa fa-minus fa-w-12 fa-3x",children:(0,y.jsx)("path",{fill:"currentColor",d:"M376 232H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h368c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z",class:""})})}),(0,y.jsx)("input",{type:"text",class:"form-control","aria-describedby":"basic-addon1",style:{textAlign:"center"},value:p.qty,onChange:function(e){return g({qty:e.target.value.replace(/[^0-9]/g,"")})}}),(0,y.jsx)("span",{class:"input-group-text",id:"basic-addon1",style:{borderRadius:"0 10px 10px 0",background:"#fff"},onClick:function(){return g({qty:parseInt(p.qty||0)+1})},children:(0,y.jsx)("svg",{style:{width:"1rem"},"aria-hidden":"true",focusable:"false","data-prefix":"fal","data-icon":"plus",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",class:"svg-inline--fa fa-plus fa-w-12 fa-3x",children:(0,y.jsx)("path",{fill:"currentColor",d:"M376 232H216V72c0-4.42-3.58-8-8-8h-32c-4.42 0-8 3.58-8 8v160H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h160v160c0 4.42 3.58 8 8 8h32c4.42 0 8-3.58 8-8V280h160c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z",class:""})})})]})]}),(0,y.jsxs)("div",{className:"col-xl-3",children:[(0,y.jsx)("label",{className:"form-label",children:"Amount"}),(0,y.jsx)("input",{value:p.amount,type:"text",readOnly:!0,className:"form-control price-control"})]})]}),"out"==p.invstatus?(0,y.jsxs)("div",{className:"row mb-3",children:[(0,y.jsxs)("div",{className:"col-xl-3",children:[(0,y.jsx)("label",{className:"form-label",children:"Voucher Code"}),(0,y.jsx)("input",{type:"text",className:"form-control",value:p.vouchercode,onChange:function(e){return g({vouchercode:e.target.value})}})]}),(0,y.jsxs)("div",{className:"col-xl-3",children:[(0,y.jsx)("label",{className:"form-label",children:"Customer Name"}),(0,y.jsx)("input",{type:"text",className:"form-control",value:p.customername,onChange:function(e){return g({customername:e.target.value})}})]})]}):"",(0,y.jsx)("div",{className:"row mb-3",children:(0,y.jsxs)("div",{className:"col-xl-5",children:[(0,y.jsx)("label",{className:"form-label",children:"Remark"}),(0,y.jsx)("textarea",{className:"form-control",value:p.remark,onChange:function(e){return g({remark:e.target.value})}})]})})]})})]})}},75676:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var n=r(86455),a=r.n(n),s=function(e){return a().fire({icon:"error",title:"Oops...",text:e.message,footer:'<a href="">Why do I have this issue?</a>'})}},40889:function(e,t,r){"use strict";r.d(t,{l:function(){return s}});var n=r(69174),a=r.n(n),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",t=parseFloat(e.toString().replaceAll(",","").replace(/[a-zA-Z]/g,"")||"0");return a()(t.toFixed(2))}},27966:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(92809),a=r(30266),s=r(809),i=r.n(s),c=r(9669),l=r.n(c),o=JSON.parse('{"n":"http://localhost:8080/api/v1"}');function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(){return{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},p={post:function(){var e=(0,a.Z)(i().mark((function e(t,r){var n,a,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},e.prev=1,e.next=4,l().post(o.n+t,r,{headers:d(d({},f()),n)});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),get:function(){var e=(0,a.Z)(i().mark((function e(t){var r,n,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.prev=1,e.next=4,l().get(o.n+t,{headers:d(d({},f()),r)});case 4:return n=e.sent,e.abrupt("return",[n,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),put:function(){var e=(0,a.Z)(i().mark((function e(t,r){var n,a,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},e.prev=1,e.next=4,l().put(o.n+t,r,{headers:d(d({},f()),n)});case 4:return a=e.sent,e.abrupt("return",[a,null]);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),delete:function(){var e=(0,a.Z)(i().mark((function e(t){var r,n,a,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]?s[2]:{},e.prev=2,e.next=5,l().delete(o.n+t,r,{headers:d(d({},f()),n)});case 5:return a=e.sent,e.abrupt("return",[a,null]);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",[null,e.t0]);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}},3974:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inventory-activity/form",function(){return r(49580)}])},18685:function(){},20067:function(){},55382:function(){},72095:function(){},72061:function(){},61219:function(){}},function(e){e.O(0,[774,599,524,698,849,885,838,815,432,888,179],(function(){return t=3974,e(e.s=t);var t}));var t=e.O();_N_E=t}]);